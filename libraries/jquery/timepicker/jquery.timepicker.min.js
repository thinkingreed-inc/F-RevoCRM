(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function i(b){var d=b.data("timepicker-settings"),e=b.data("timepicker-list");e&&e.length&&(e.remove(),b.data("timepicker-list",!1)),e=a("<ul />"),e.attr("tabindex",-1),e.addClass("ui-timepicker-list"),d.className&&e.addClass(d.className),e.css({display:"none",position:"absolute"}),null!==d.minTime&&d.showDuration&&e.addClass("ui-timepicker-with-duration");var f=null!==d.durationTime?d.durationTime:d.minTime,g=null!==d.minTime?d.minTime:0,h=null!==d.maxTime?d.maxTime:g+c-1;g>=h&&(h+=c);for(var i=g;h>=i;i+=60*d.step){var j=i%c,k=a("<li />");if(k.data("time",j),k.text(q(j,d.timeFormat)),null!==d.minTime&&d.showDuration){var m=a("<span />");m.addClass("ui-timepicker-duration"),m.text(" ("+p(i-f)+")"),k.append(m)}e.append(k)}e.data("timepicker-input",b),b.data("timepicker-list",e);var n=d.appendTo;"string"==typeof n?n=a(n):"function"==typeof n&&(n=n(b)),n.append(e),l(b,e),e.on("click","li",function(){b.addClass("ui-timepicker-hideme"),b[0].focus(),e.find("li").removeClass("ui-timepicker-selected"),a(this).addClass("ui-timepicker-selected"),o(b),e.hide()})}function j(){var a=new Date,b=6e4*a.getTimezoneOffset();a.setHours(0),a.setMinutes(0),a.setSeconds(0);var c=6e4*a.getTimezoneOffset();return new Date(a.valueOf()-c+b)}function k(b,c,d){if(!d&&0!==d)return!1;var e=b.data("timepicker-settings"),f=!1;return c.find("li").each(function(b,c){var g=a(c);return Math.abs(g.data("time")-d)<=30*e.step?(f=g,!1):void 0}),f}function l(a,b){var c=r(a.val()),d=k(a,b,c);d&&d.addClass("ui-timepicker-selected")}function m(){if(""!==this.value){var b=a(this),c=r(this.value);if(null===c)return b.trigger("timeFormatError"),void 0;var d=q(c,b.data("timepicker-settings").timeFormat);b.val(d)}}function n(b){var c=a(this),d=c.data("timepicker-list");if(!d.is(":visible")){if(40!=b.keyCode)return!0;c.focus()}switch(b.keyCode){case 13:return o(c),h.hide.apply(this),b.preventDefault(),!1;case 38:var e=d.find(".ui-timepicker-selected");e.length?e.is(":first-child")||(e.removeClass("ui-timepicker-selected"),e.prev().addClass("ui-timepicker-selected"),e.prev().position().top<e.outerHeight()&&d.scrollTop(d.scrollTop()-e.outerHeight())):(d.children().each(function(b,c){return a(c).position().top>0?(e=a(c),!1):void 0}),e.addClass("ui-timepicker-selected"));break;case 40:e=d.find(".ui-timepicker-selected"),0===e.length?(d.children().each(function(b,c){return a(c).position().top>0?(e=a(c),!1):void 0}),e.addClass("ui-timepicker-selected")):e.is(":last-child")||(e.removeClass("ui-timepicker-selected"),e.next().addClass("ui-timepicker-selected"),e.next().position().top+2*e.outerHeight()>d.outerHeight()&&d.scrollTop(d.scrollTop()+e.outerHeight()));break;case 27:d.find("li").removeClass("ui-timepicker-selected"),d.hide();break;case 9:h.hide();break;case 16:case 17:case 18:case 19:case 20:case 33:case 34:case 35:case 36:case 37:case 39:case 45:return;default:return d.find("li").removeClass("ui-timepicker-selected"),void 0}}function o(a){var b=a.data("timepicker-settings"),c=a.data("timepicker-list"),d=null,e=c.find(".ui-timepicker-selected");if(e.length?d=e.data("time"):a.val()&&(d=r(a.val()),l(a,c)),null!==d){var f=q(d,b.timeFormat);a.attr("value",f)}a.trigger("change").trigger("changeTime")}function p(a){var c,b=Math.round(a/60);if(60>b)c=[b,f.mins];else if(60==b)c=["1",f.hr];else{var d=(b/60).toFixed(1);"."!=f.decimal&&(d=d.replace(".",f.decimal)),c=[d,f.hrs]}return c.join(" ")}function q(a,c){if(null!==a){for(var f,g,d=new Date(b.valueOf()+1e3*a),e="",h=0;c.length>h;h++)switch(g=c.charAt(h)){case"a":e+=d.getHours()>11?"pm":"am";break;case"A":e+=d.getHours()>11?"PM":"AM";break;case"g":f=d.getHours()%12,e+=0===f?"12":f;break;case"G":e+=d.getHours();break;case"h":f=d.getHours()%12,0!==f&&10>f&&(f="0"+f),e+=0===f?"12":f;break;case"H":f=d.getHours(),e+=f>9?f:"0"+f;break;case"i":var i=d.getMinutes();e+=i>9?i:"0"+i;break;case"s":a=d.getSeconds(),e+=a>9?a:"0"+a;break;default:e+=g}return e}}function r(a){if(""===a)return null;if(a+0==a)return a;"object"==typeof a&&(a=a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()),new Date(0);var c=a.toLowerCase().match(/(\d{1,2})(?::(\d{1,2}))?(?::(\d{2}))?\s*([pa]?)/);if(!c)return null;var e,d=parseInt(1*c[1],10);e=c[4]?12==d?"p"==c[4]?12:0:d+("p"==c[4]?12:0):d;var f=1*c[2]||0,g=1*c[3]||0;return 3600*e+60*f+g}var b=j(),c=86400,d="ontouchstart"in document?"touchstart":"mousedown",e={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,timeFormat:"g:ia",scrollDefaultNow:!1,scrollDefaultTime:!1,selectOnBlur:!1,appendTo:"body"},f={decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},g=!1,h={init:function(b){return this.each(function(){var c=a(this);if("SELECT"==c[0].tagName){for(var i=a("<input />"),j={type:"text",value:c.val()},k=c[0].attributes,l=0;k.length>l;l++)j[k[l].nodeName]=k[l].nodeValue;i.attr(j),c.replaceWith(i),c=i}var o=a.extend({},e);b&&(o=a.extend(o,b)),o.minTime&&(o.minTime=r(o.minTime)),o.maxTime&&(o.maxTime=r(o.maxTime)),o.durationTime&&(o.durationTime=r(o.durationTime)),o.lang&&(f=a.extend(f,o.lang)),c.data("timepicker-settings",o),c.attr("autocomplete","off"),c.on("click.timepicker focus.timepicker",h.show),c.on("blur.timepicker",m),c.on("keydown.timepicker",n),c.addClass("ui-timepicker-input"),m.call(c.get(0)),g||(a("body").on(d,function(b){var c=a(b.target),d=c.closest(".ui-timepicker-input");0===d.length&&0===c.closest(".ui-timepicker-list").length&&h.hide()}),g=!0)})},show:function(){var c=a(this);"ontouchstart"in document&&c.blur();var d=c.data("timepicker-list");if(!c.attr("readonly")){if(d&&0!==d.length||(i(c),d=c.data("timepicker-list")),c.hasClass("ui-timepicker-hideme"))return c.removeClass("ui-timepicker-hideme"),d.hide(),void 0;if(!d.is(":visible")){h.hide(),c.offset().top+c.outerHeight(!0)+d.outerHeight()>a(window).height()+a(window).scrollTop()?d.css({left:c.offset().left,top:c.offset().top-d.outerHeight()}):d.css({left:c.offset().left,top:c.offset().top+c.outerHeight()}),d.show();var e=c.data("timepicker-settings"),f=d.find(".ui-timepicker-selected");if(f.length||(c.val()?f=k(c,d,r(c.val())):e.scrollDefaultNow?f=k(c,d,r(new Date)):e.scrollDefaultTime!==!1&&(f=k(c,d,r(e.scrollDefaultTime)))),f&&f.length){var g=d.scrollTop()+f.position().top-f.outerHeight();d.scrollTop(g)}else d.scrollTop(0);c.trigger("showTimepicker")}}},hide:function(){a(".ui-timepicker-list:visible").each(function(){var b=a(this),c=b.data("timepicker-input"),d=c.data("timepicker-settings");d&&d.selectOnBlur&&o(c),b.hide(),c.trigger("hideTimepicker")})},option:function(b,c){var d=a(this),e=d.data("timepicker-settings"),f=d.data("timepicker-list");if("object"==typeof b)e=a.extend(e,b);else if("string"==typeof b&&c!==void 0)e[b]=c;else if("string"==typeof b)return e[b];e.minTime&&(e.minTime=r(e.minTime)),e.maxTime&&(e.maxTime=r(e.maxTime)),e.durationTime&&(e.durationTime=r(e.durationTime)),d.data("timepicker-settings",e),f&&(f.remove(),d.data("timepicker-list",!1))},getSecondsFromMidnight:function(){return r(a(this).val())},getTime:function(){return new Date(b.valueOf()+1e3*r(a(this).val()))},setTime:function(b){var c=a(this),d=q(r(b),c.data("timepicker-settings").timeFormat);c.val(d)},remove:function(){var b=a(this);b.hasClass("ui-timepicker-input")&&(b.removeAttr("autocomplete","off"),b.removeClass("ui-timepicker-input"),b.removeData("timepicker-settings"),b.off(".timepicker"),b.data("timepicker-list")&&b.data("timepicker-list").remove(),b.removeData("timepicker-list"))}};a.fn.timepicker=function(b){return h[b]?h[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.timepicker"),void 0):h.init.apply(this,arguments)}});